# AI 终端助手功能增强计划

## 创建日期
2026-01-29

## 功能概述
增强 AI 终端助手，实现与远程服务器文件的无缝交互。

---

## 功能 1: @引用读取远程文件

### 描述
在 AI 聊天中使用 `@文件路径` 语法引用远程服务器上的文件，AI 自动读取文件内容并处理。

### 使用示例
```
用户终端执行: ls
输出: config.yml  main.py  README.md

用户在AI聊天输入: 请帮我解释 @main.py 的代码
→ AI 自动读取 main.py 内容，然后分析解释
```

### 实现要点
- 解析输入中的 `@path` 模式
- 通过当前 SSH 会话执行 `cat` 命令读取文件
- 支持相对路径（需追踪当前工作目录）
- 限制文件大小（避免超出 AI token 限制）
- 过滤二进制文件

### 复杂度: 中

---

## 功能 2: 保存到文件

### 描述
AI 生成的代码块可以直接保存到远程服务器的指定位置。

### 使用示例
```
用户: 帮我写一个 nginx 配置文件
AI: 生成配置内容...

代码块按钮:
[复制] [插入终端] [保存到文件 📄]
                      ↓
              弹出输入框让用户指定文件名
              → 通过 SSH 写入远程服务器
```

### 实现要点
- 代码块新增"保存到文件"按钮
- 弹出对话框让用户输入目标文件路径
- 通过 SSH 执行写入命令（如 `cat > filename` 或 SFTP）
- 提示保存成功/失败

### 复杂度: 中

---

## 功能 3: 当前目录追踪 (可选)

### 描述
追踪终端的当前工作目录，支持 @引用使用相对路径。

### 复杂度: 中

---

## 功能 4: @自动补全 (进阶)

### 描述
输入 `@` 时显示当前目录的文件列表供选择。

### 复杂度: 高

---

## 优先级

| 优先级 | 功能 | 状态 |
|--------|------|------|
| P1 | 保存到文件 | 待实现 |
| P1 | @引用读取 | 待实现 |
| P2 | 当前目录追踪 | 待实现 |
| P3 | @自动补全 | 待实现 |

---

## 相关文件
- `src/components/AI/AIChatPanel.vue` - AI 聊天面板
- `src/stores/ai.ts` - AI 状态管理
- `electron/managers/SSHManager.ts` - SSH 连接管理
